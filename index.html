<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>簿記 商店経営RPG（MVP）</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="topbar">
    <h1>簿記 商店経営RPG</h1>
    <div class="user">
      <button id="loginBtn">Googleでログイン</button>
      <span id="userName" class="muted"></span>
    </div>
  </header>

  <main>
    <section id="homeView" class="view">
      <div class="card">
        <h2>本日のクエスト</h2>
        <p>10問のクイック学習に挑戦して、XPとコインを集めよう。</p>
        <button id="startQuizBtn" class="primary">クエストを始める</button>
      </div>

      <div class="grid">
        <div class="card">
          <h3>進捗</h3>
          <p>今日のXP：<span id="todayXp">0</span></p>
          <p>コンボ：<span id="combo">0</span></p>
          <p>復習待ち：<span id="reviewCount">0</span></p>
        </div>
        <div class="card">
          <h3>マイ店舗</h3>
          <p>棚レベル：<span id="shelfLevel">1</span></p>
          <p>週ポイント：<span id="weeklyPoints">0</span></p>
        </div>
      </div>
    </section>

    <section id="quizView" class="view hidden">
      <div class="card">
        <div id="quizMeta">
          <span id="qProgress">1 / 10</span>
          <span id="qTag" class="tag"></span>
        </div>
        <h2 id="qText">問題文</h2>
        <div id="choices" class="choices"></div>
        <div id="feedback" class="feedback"></div>
        <div class="row">
          <button id="nextBtn" class="primary" disabled>次へ</button>
          <button id="quitBtn" class="ghost">やめる</button>
        </div>
      </div>
    </section>

    <section id="resultView" class="view hidden">
      <div class="card center">
        <h2>クエスト結果</h2>
        <p>正答数：<span id="correctCount">0</span> / 10</p>
        <p>獲得XP：<span id="earnedXp">0</span></p>
        <p>週ポイント合計：<span id="finalWeeklyPoints">0</span></p>
        <button id="backHomeBtn" class="primary">ホームへ戻る</button>
      </div>
    </section>
  </main>

  <footer>
    <small>© 2025 BokiRPG • <a href="README.html">README</a></small>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="firebase.config.js"></script>
  <script src="scripts.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js');
      });
    }
  </script>
</body>
</html>
